---
layout: raw
title: CV
permalink: /cv-nicolas-betheuil/
---
<head>
    <script type="importmap">
      {
        "imports": {
          "handlebars": "https://esm.sh/handlebars",
          "date-fns": "https://esm.sh/date-fns",
          "date-fns/locale": "https://esm.sh/date-fns/locale"
        }
      }


    </script>
    <link rel="stylesheet" href="/jsonresume-theme-stackoverflow-main/style.css">
</head>
<body>

<div id="app">
    <div class="progress-wrapper">
        <div class="progress"></div>
    </div>
</div>
<script type="module">
    import Handlebars from 'handlebars'

    const partials = ["awards",
        "basics",
        "certificates",
        "date",
        "date-raw",
        "education",
        "interests",
        "languages",
        "projects",
        "publications",
        "references",
        "skills",
        "volunteer",
        "work"
    ].map(async p => {
        const partial = await fetch(`/jsonresume-theme-stackoverflow-main/theme/partials/${p}.hbs`).then(t => t.text())
        Handlebars.registerPartial(p, partial)
    });
    const helpers = [
        "date-helpers",
        "date-diff",
        "paragraph-split",
        "space-to-dash",
        "to-lower-case"]
        .map(async h => {
            const helper = (await import(`/jsonresume-theme-stackoverflow-main/theme/hbs-helpers/${h}.js`))
            const helperName = h.split('-').map((v, i) => {
                return (i === 0 ? v : `${v.at(0).toUpperCase()}${v.slice(1)}`)
            }).join('')
            Handlebars.registerHelper(helperName, helper[helperName])
        });

    const template = Handlebars.compile(await fetch("/jsonresume-theme-stackoverflow-main/resume.hbs").then(t => t.text()))

    const theApp = fetch('https://gist.githubusercontent.com/wadouk/5b72a9671bfb52fb28ca496f3ecde24d/raw/resume.json')
        .then(r => r.json())

    Promise.all([theApp].concat(partials).concat(helpers))
        .then(([resume, ...others]) => {
            document.getElementById("app").innerHTML = template({resume})

            const projectHeader = document.querySelector("#projects").parentElement.querySelector("header .keywords")

            const keywordFilters = new Set()

            document.addEventListener('keyword', (e) => {
                if (e.has) {
                    keywordFilters.delete(e.keyword)
                    Array.from(projectHeader.querySelectorAll("li")).filter(n => e.myTarget.innerText.trim().toUpperCase() === n.innerText.trim().toUpperCase()).map(n => n.remove())
                } else {
                    keywordFilters.add(e.keyword)
                    let newNode = e.myTarget.cloneNode(true);
                    projectHeader.appendChild(newNode)
                }
                filterProjectsByKeywords()
            })

            function filterProjectsByKeywords() {
                Array.from(document.querySelectorAll(".project-item"))
                    .map(n => {
                        const contain = Array.from(n.querySelectorAll(".keywords li"))
                            .map(k => {
                                return keywordFilters.has(k.innerText.toLowerCase().trim()) || keywordFilters.size === 0
                            })
                            .reduce((a, b) => a || b, false)
                        n.classList[contain ? "remove" : "add"]("collapse")
                    })
            }

            document.querySelector("#app").addEventListener('click', e => {
                if ("keywords" === e.target.parentElement.className) {
                    e.stopImmediatePropagation()
                    e.preventDefault()

                    let keyword = e.target.innerText.toLowerCase().trim();
                    const event = new Event('keyword')
                    event.keyword = keyword
                    event.has = keywordFilters.has(keyword)
                    event.myTarget = e.target
                    document.dispatchEvent(event)
                }
            })
        })


</script>

</body>